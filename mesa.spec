#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
# Using build pattern: meson
# autospec version: v27
# autospec commit: cd8d006
#
Name     : mesa
Version  : 25.1.2609.g5b50f229f08
Release  : 886
URL      : https://gitlab.freedesktop.org/mesa/mesa/-/archive/5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/mesa-25.1+2609-g5b50f229f08.tar.bz2
Source0  : https://gitlab.freedesktop.org/mesa/mesa/-/archive/5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/mesa-25.1+2609-g5b50f229f08.tar.bz2
Source1  : https://static.crates.io/crates/equivalent/equivalent-1.0.1.crate
Source2  : https://static.crates.io/crates/hashbrown/hashbrown-0.14.1.crate
Source3  : https://static.crates.io/crates/indexmap/indexmap-2.2.6.crate
Source4  : https://static.crates.io/crates/once_cell/once_cell-1.8.0.crate
Source5  : https://static.crates.io/crates/paste/paste-1.0.14.crate
Source6  : https://static.crates.io/crates/pest/pest-2.8.0.crate
Source7  : https://static.crates.io/crates/pest_derive/pest_derive-2.8.0.crate
Source8  : https://static.crates.io/crates/pest_generator/pest_generator-2.8.0.crate
Source9  : https://static.crates.io/crates/pest_meta/pest_meta-2.8.0.crate
Source10  : https://static.crates.io/crates/proc-macro2/proc-macro2-1.0.86.crate
Source11  : https://static.crates.io/crates/quote/quote-1.0.33.crate
Source12  : https://static.crates.io/crates/roxmltree/roxmltree-0.20.0.crate
Source13  : https://static.crates.io/crates/rustc-hash/rustc-hash-2.1.1.crate
Source14  : https://static.crates.io/crates/syn/syn-2.0.68.crate
Source15  : https://static.crates.io/crates/ucd-trie/ucd-trie-0.1.6.crate
Source16  : https://static.crates.io/crates/unicode-ident/unicode-ident-1.0.12.crate
Summary  : No detailed summary available
Group    : Development/Tools
License  : Apache-2.0 BSD-2-Clause MIT Unicode-DFS-2016
Requires: mesa-bin = %{version}-%{release}
Requires: mesa-data = %{version}-%{release}
Requires: mesa-lib = %{version}-%{release}
Requires: mesa-libexec = %{version}-%{release}
Requires: mesa-license = %{version}-%{release}
BuildRequires : PyYAML
BuildRequires : SPIRV-Tools-dev
BuildRequires : SPIRV-Tools-dev32
BuildRequires : Vulkan-Headers-dev
BuildRequires : Vulkan-Loader-dev
BuildRequires : Vulkan-Loader-dev32
BuildRequires : Vulkan-Tools
BuildRequires : bison
BuildRequires : buildreq-meson
BuildRequires : cbindgen
BuildRequires : directx-headers-staticdev
BuildRequires : directx-headers-staticdev32
BuildRequires : elfutils-dev32
BuildRequires : expat-dev
BuildRequires : expat-dev32
BuildRequires : flex
BuildRequires : gcc-dev32
BuildRequires : gcc-libgcc32
BuildRequires : gcc-libstdc++32
BuildRequires : glibc-dev32
BuildRequires : glibc-libc32
BuildRequires : glslang
BuildRequires : libX11-dev32
BuildRequires : libXv-dev32
BuildRequires : libclc-dev
BuildRequires : libepoxy-dev
BuildRequires : libgcrypt-dev
BuildRequires : libglvnd-dev
BuildRequires : libpthread-stubs-dev
BuildRequires : libva-dev
BuildRequires : libvdpau-dev
BuildRequires : llvm-dev32
BuildRequires : llvm-staticdev
BuildRequires : mesa-bin
BuildRequires : mesa-clc
BuildRequires : nasm
BuildRequires : nettle-dev
BuildRequires : nettle-dev32
BuildRequires : ocl-icd-dev
BuildRequires : pkgconfig(32dri3proto)
BuildRequires : pkgconfig(32epoxy)
BuildRequires : pkgconfig(32libdrm_intel)
BuildRequires : pkgconfig(32libudev)
BuildRequires : pkgconfig(32xdamage)
BuildRequires : pkgconfig(32xext)
BuildRequires : pkgconfig(32xfixes)
BuildRequires : pkgconfig(32xshmfence)
BuildRequires : pkgconfig(32xvmc)
BuildRequires : pkgconfig(DirectX-Headers)
BuildRequires : pkgconfig(dri3proto)
BuildRequires : pkgconfig(epoxy)
BuildRequires : pkgconfig(gtk+-3.0)
BuildRequires : pkgconfig(libdrm_intel)
BuildRequires : pkgconfig(libudev)
BuildRequires : pkgconfig(presentproto)
BuildRequires : pkgconfig(valgrind)
BuildRequires : pkgconfig(xdamage)
BuildRequires : pkgconfig(xfixes)
BuildRequires : pkgconfig(xshmfence)
BuildRequires : pkgconfig(xvmc)
BuildRequires : pypi-mako
BuildRequires : pypi-ply
BuildRequires : rust-bindgen
BuildRequires : rustc
BuildRequires : rustc-extras-lib32
BuildRequires : valgrind
BuildRequires : wayland-dev
BuildRequires : wayland-dev32
BuildRequires : wayland-protocols-dev
BuildRequires : wayland-protocols-dev32
BuildRequires : yasm
BuildRequires : zlib-dev
BuildRequires : zlib-dev32
BuildRequires : zstd-dev
BuildRequires : zstd-dev32
Patch1: 0001-Revert-mesa-Enable-asm-unconditionally-now-that-gen_.patch
Patch2: asmbuild.patch
Patch3: blake.patch

%description
This directory contains a copy of the installed kernel headers
required by several drivers to communicate with the kernel.
Whenever one of those driver needs new definitions for new kernel
APIs, these files should be updated.

%package bin
Summary: bin components for the mesa package.
Group: Binaries
Requires: mesa-data = %{version}-%{release}
Requires: mesa-libexec = %{version}-%{release}
Requires: mesa-license = %{version}-%{release}

%description bin
bin components for the mesa package.


%package data
Summary: data components for the mesa package.
Group: Data

%description data
data components for the mesa package.


%package dev
Summary: dev components for the mesa package.
Group: Development
Requires: mesa-lib = %{version}-%{release}
Requires: mesa-bin = %{version}-%{release}
Requires: mesa-data = %{version}-%{release}
Provides: mesa-devel = %{version}-%{release}
Requires: mesa = %{version}-%{release}
Requires: libglvnd-dev

%description dev
dev components for the mesa package.


%package dev32
Summary: dev32 components for the mesa package.
Group: Default
Requires: mesa-lib32 = %{version}-%{release}
Requires: mesa-bin = %{version}-%{release}
Requires: mesa-data = %{version}-%{release}
Requires: mesa-dev = %{version}-%{release}

%description dev32
dev32 components for the mesa package.


%package lib
Summary: lib components for the mesa package.
Group: Libraries
Requires: mesa-data = %{version}-%{release}
Requires: mesa-libexec = %{version}-%{release}
Requires: mesa-license = %{version}-%{release}

%description lib
lib components for the mesa package.


%package lib32
Summary: lib32 components for the mesa package.
Group: Default
Requires: mesa-data = %{version}-%{release}
Requires: mesa-license = %{version}-%{release}

%description lib32
lib32 components for the mesa package.


%package libexec
Summary: libexec components for the mesa package.
Group: Default
Requires: mesa-license = %{version}-%{release}

%description libexec
libexec components for the mesa package.


%package license
Summary: license components for the mesa package.
Group: Default

%description license
license components for the mesa package.


%prep
%setup -q -n mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46
cd %{_builddir}
tar xf %{_sourcedir}/ucd-trie-0.1.6.crate
cd %{_builddir}
tar xf %{_sourcedir}/pest_meta-2.8.0.crate
cd %{_builddir}
tar xf %{_sourcedir}/indexmap-2.2.6.crate
cd %{_builddir}
tar xf %{_sourcedir}/hashbrown-0.14.1.crate
cd %{_builddir}
tar xf %{_sourcedir}/rustc-hash-2.1.1.crate
cd %{_builddir}
tar xf %{_sourcedir}/proc-macro2-1.0.86.crate
cd %{_builddir}
tar xf %{_sourcedir}/pest_derive-2.8.0.crate
cd %{_builddir}
tar xf %{_sourcedir}/unicode-ident-1.0.12.crate
cd %{_builddir}
tar xf %{_sourcedir}/quote-1.0.33.crate
cd %{_builddir}
tar xf %{_sourcedir}/roxmltree-0.20.0.crate
cd %{_builddir}
tar xf %{_sourcedir}/paste-1.0.14.crate
cd %{_builddir}
tar xf %{_sourcedir}/pest-2.8.0.crate
cd %{_builddir}
tar xf %{_sourcedir}/equivalent-1.0.1.crate
cd %{_builddir}
tar xf %{_sourcedir}/pest_generator-2.8.0.crate
cd %{_builddir}
tar xf %{_sourcedir}/once_cell-1.8.0.crate
cd %{_builddir}
tar xf %{_sourcedir}/syn-2.0.68.crate
cd %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46
mkdir -p ./subprojects/ucd-trie-0.1.6
cp -r %{_builddir}/ucd-trie-0.1.6/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/ucd-trie-0.1.6
mkdir -p ./subprojects/pest_meta-2.8.0
cp -r %{_builddir}/pest_meta-2.8.0/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/pest_meta-2.8.0
mkdir -p ./subprojects/indexmap-2.2.6
cp -r %{_builddir}/indexmap-2.2.6/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/indexmap-2.2.6
mkdir -p ./subprojects/hashbrown-0.14.1
cp -r %{_builddir}/hashbrown-0.14.1/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/hashbrown-0.14.1
mkdir -p ./subprojects/rustc-hash-2.1.1
cp -r %{_builddir}/rustc-hash-2.1.1/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/rustc-hash-2.1.1
mkdir -p ./subprojects/proc-macro2-1.0.86
cp -r %{_builddir}/proc-macro2-1.0.86/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/proc-macro2-1.0.86
mkdir -p ./subprojects/pest_derive-2.8.0
cp -r %{_builddir}/pest_derive-2.8.0/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/pest_derive-2.8.0
mkdir -p ./subprojects/unicode-ident-1.0.12
cp -r %{_builddir}/unicode-ident-1.0.12/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/unicode-ident-1.0.12
mkdir -p ./subprojects/quote-1.0.33
cp -r %{_builddir}/quote-1.0.33/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/quote-1.0.33
mkdir -p ./subprojects/roxmltree-0.20.0
cp -r %{_builddir}/roxmltree-0.20.0/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/roxmltree-0.20.0
mkdir -p ./subprojects/paste-1.0.14
cp -r %{_builddir}/paste-1.0.14/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/paste-1.0.14
mkdir -p ./subprojects/pest-2.8.0
cp -r %{_builddir}/pest-2.8.0/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/pest-2.8.0
mkdir -p ./subprojects/equivalent-1.0.1
cp -r %{_builddir}/equivalent-1.0.1/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/equivalent-1.0.1
mkdir -p ./subprojects/pest_generator-2.8.0
cp -r %{_builddir}/pest_generator-2.8.0/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/pest_generator-2.8.0
mkdir -p ./subprojects/once_cell-1.8.0
cp -r %{_builddir}/once_cell-1.8.0/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/once_cell-1.8.0
mkdir -p ./subprojects/syn-2.0.68
cp -r %{_builddir}/syn-2.0.68/. %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/./subprojects/syn-2.0.68
%patch -P 1 -p1
%patch -P 2 -p1
%patch -P 3 -p1
pushd ..
cp -a mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46 build32
popd
pushd ..
cp -a mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46 buildavx2
popd

%build
## build_prepend_once content
i686_dir="%{_builddir}/build32"
deps_dir="${i686_dir}/subprojects/packagefiles"

for dir in "${deps_dir}"/*; do
name=$(basename "${dir}")
mv "${dir}/meson.build" "${i686_dir}/subprojects/${name}"-*
done

cat > "${i686_dir}/lib32" <<END
[binaries]
c = ['gcc', '-m32']
cpp = ['g++', '-m32']
rust = ['rustc', '--target', 'i686-unknown-linux-gnu']
pkgconfig = 'pkg-config'
cups-config = 'cups-config'
llvm-config = 'llvm-config'
strip = 'strip'

[built-in options]
libdir = 'lib32'

[host_machine]
system = 'linux'
subsystem = 'linux'
kernel = 'linux'
cpu_family = 'x86'
cpu = 'i686'
endian = 'little'
END
## build_prepend_once end
## build_prepend content
deps_dir="./subprojects/packagefiles"

for dir in "${deps_dir}"/*; do
name=$(basename "${dir}")
mv "${dir}/meson.build" ./subprojects/"${name}"-*
done
## build_prepend end
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export SOURCE_DATE_EPOCH=1750104662
unset LD_AS_NEEDED
export GCC_IGNORE_WERROR=1
CLEAR_INTERMEDIATE_CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS -fno-lto "
CLEAR_INTERMEDIATE_FCFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fno-lto "
CLEAR_INTERMEDIATE_FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fno-lto "
CLEAR_INTERMEDIATE_CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS -fno-lto "
CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS"
CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS"
FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS"
FCFLAGS="$CLEAR_INTERMEDIATE_FCFLAGS"
ASFLAGS="$CLEAR_INTERMEDIATE_ASFLAGS"
LDFLAGS="$CLEAR_INTERMEDIATE_LDFLAGS"
export GOAMD64=v2
meson --libdir=lib64 --prefix=/usr --buildtype=plain -Dplatforms=wayland,x11 \
-Dglx=dri \
-Dgallium-drivers=r300,r600,radeonsi,nouveau,virgl,svga,iris,crocus,i915,zink,d3d12 \
-Dcpp_std=gnu++17 \
-Dgallium-va=enabled \
-Dvulkan-drivers=intel,amd,intel_hasvk,swrast,virtio,nouveau \
-Dvulkan-layers=device-select,intel-nullhw,overlay \
-Dshared-glapi=enabled \
-Dglvnd=enabled \
-Dllvm=enabled \
-Dshared-llvm=enabled \
-Dselinux=false \
-Dosmesa=true \
-Dzstd=enabled \
-Dshader-cache=enabled \
-Dopengl=true \
-Dtools="intel-ui" \
-Dintel-clc=enabled \
-Dinstall-intel-clc=true \
-Dlegacy-x11=dri2 \
-Dgallium-rusticl=true  builddir
ninja -v -C builddir
GOAMD64=v3
CFLAGS="$CFLAGS -march=x86-64-v3 -Wl,-z,x86-64-v3 " CXXFLAGS="$CXXFLAGS -march=x86-64-v3 -Wl,-z,x86-64-v3 " LDFLAGS="$LDFLAGS -march=x86-64-v3 " meson --libdir=lib64 --prefix=/usr --buildtype=plain -Dplatforms=wayland,x11 \
-Dglx=dri \
-Dgallium-drivers=r300,r600,radeonsi,nouveau,virgl,svga,iris,crocus,i915,zink,d3d12 \
-Dcpp_std=gnu++17 \
-Dgallium-va=enabled \
-Dvulkan-drivers=intel,amd,intel_hasvk,swrast,virtio,nouveau \
-Dvulkan-layers=device-select,intel-nullhw,overlay \
-Dshared-glapi=enabled \
-Dglvnd=enabled \
-Dllvm=enabled \
-Dshared-llvm=enabled \
-Dselinux=false \
-Dosmesa=true \
-Dzstd=enabled \
-Dshader-cache=enabled \
-Dopengl=true \
-Dtools="intel-ui" \
-Dintel-clc=enabled \
-Dinstall-intel-clc=true \
-Dlegacy-x11=dri2 \
-Dgallium-rusticl=true  builddiravx2
ninja -v -C builddiravx2
pushd ../build32/
export PKG_CONFIG_PATH="/usr/lib32/pkgconfig:/usr/share/pkgconfig"
ASFLAGS="${CLEAR_INTERMEDIATE_ASFLAGS}${CLEAR_INTERMEDIATE_ASFLAGS:+ }--32"
CFLAGS="${CLEAR_INTERMEDIATE_CFLAGS}${CLEAR_INTERMEDIATE_CFLAGS:+ }-m32 -mstackrealign"
CXXFLAGS="${CLEAR_INTERMEDIATE_CXXFLAGS}${CLEAR_INTERMEDIATE_CXXFLAGS:+ }-m32 -mstackrealign"
LDFLAGS="${CLEAR_INTERMEDIATE_LDFLAGS}${CLEAR_INTERMEDIATE_LDFLAGS:+ }-m32 -mstackrealign"
meson --libdir=lib32 --prefix=/usr --buildtype=plain -Dplatforms=wayland,x11 \
-Dglx=dri \
-Dgallium-drivers=r300,r600,radeonsi,nouveau,virgl,svga,iris,crocus,i915,zink,d3d12 \
-Dcpp_std=gnu++17 \
-Dgallium-va=enabled \
-Dvulkan-drivers=intel,amd,intel_hasvk,swrast,virtio,nouveau \
-Dvulkan-layers=device-select,intel-nullhw,overlay \
-Dshared-glapi=enabled \
-Dglvnd=enabled \
-Dllvm=enabled \
-Dshared-llvm=enabled \
-Dselinux=false \
-Dosmesa=true \
-Dzstd=enabled \
-Dshader-cache=enabled \
-Dopengl=true \
-Dtools="intel-ui" \
-Dintel-clc=enabled \
-Dinstall-intel-clc=true \
-Dlegacy-x11=dri2 \
-Dgallium-rusticl=true -Dasm=false \
-Dgallium-drivers=r300,r600,radeonsi,nouveau,virgl,svga,iris,crocus,i915 \
-Dglvnd=false \
-Dtools="" \
-Dintel-clc=system \
--cross-file lib32 \
-Dgallium-rusticl=false \
-Dmesa-clc=system builddir
ninja -v -C builddir
popd

%install
export GCC_IGNORE_WERROR=1
CLEAR_INTERMEDIATE_CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS -fno-lto "
CLEAR_INTERMEDIATE_FCFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fno-lto "
CLEAR_INTERMEDIATE_FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -fno-lto "
CLEAR_INTERMEDIATE_CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS -fno-lto "
CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS"
CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS"
FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS"
FCFLAGS="$CLEAR_INTERMEDIATE_FCFLAGS"
ASFLAGS="$CLEAR_INTERMEDIATE_ASFLAGS"
LDFLAGS="$CLEAR_INTERMEDIATE_LDFLAGS"
export GOAMD64=v2
mkdir -p %{buildroot}/usr/share/package-licenses/mesa
cp %{_builddir}/equivalent-1.0.1/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/equivalent-1.0.1/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/c371f0a7cbb203643d88566665a452f96bf1ab86 || :
cp %{_builddir}/hashbrown-0.14.1/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/hashbrown-0.14.1/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/c9c1c33aee599ebfdfb0bc2aed9ea082d9e3173a || :
cp %{_builddir}/indexmap-2.2.6/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/indexmap-2.2.6/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/7e5936a6fa3cf3518c01cec41345adf27399fe12 || :
cp %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/licenses/Apache-2.0 %{buildroot}/usr/share/package-licenses/mesa/ef39856b9b4ca101d453780fa97b117064273142 || :
cp %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/src/imgui/LICENSE.txt %{buildroot}/usr/share/package-licenses/mesa/1871c6c7ddab444838aa6a57e6fa085d4e4de683 || :
cp %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/src/mapi/glapi/gen/license.py %{buildroot}/usr/share/package-licenses/mesa/98d051673de64cfd533ded6d75f1526f5f4f27af || :
cp %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/src/vulkan/runtime/radix_sort/LICENSE %{buildroot}/usr/share/package-licenses/mesa/46aace8adc5b06990d9ee2b6bd555ea03c4df7a1 || :
cp %{_builddir}/mesa-5b50f229f08878db0c8a66dbe02ad2c2cb14ff46/src/vulkan/screenshot-layer/LICENSE.txt %{buildroot}/usr/share/package-licenses/mesa/c9e89168faf085da40190d78ade18b3a5d826c76 || :
cp %{_builddir}/once_cell-1.8.0/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/once_cell-1.8.0/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/paste-1.0.14/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/6e5c4711bcae04967d7f5b5e01cf56ae03bebe7a || :
cp %{_builddir}/paste-1.0.14/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/pest-2.8.0/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/pest-2.8.0/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/pest_derive-2.8.0/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/pest_derive-2.8.0/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/pest_generator-2.8.0/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/pest_generator-2.8.0/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/pest_meta-2.8.0/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/pest_meta-2.8.0/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/proc-macro2-1.0.86/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/6e5c4711bcae04967d7f5b5e01cf56ae03bebe7a || :
cp %{_builddir}/proc-macro2-1.0.86/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/quote-1.0.33/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/6e5c4711bcae04967d7f5b5e01cf56ae03bebe7a || :
cp %{_builddir}/quote-1.0.33/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/roxmltree-0.20.0/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/roxmltree-0.20.0/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/2ac7dbfded0b5535a308f7dee23b884658be87e0 || :
cp %{_builddir}/rustc-hash-2.1.1/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/ed19a80b922d4e5e50d5b1ed3f0f35c081872d14 || :
cp %{_builddir}/rustc-hash-2.1.1/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/a74c5e048f9ed570eb892f81ca5daf05936475b0 || :
cp %{_builddir}/syn-2.0.68/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/6e5c4711bcae04967d7f5b5e01cf56ae03bebe7a || :
cp %{_builddir}/syn-2.0.68/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/ucd-trie-0.1.6/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229 || :
cp %{_builddir}/ucd-trie-0.1.6/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/4c8990add9180fc59efa5b0d8faf643c9709501e || :
cp %{_builddir}/unicode-ident-1.0.12/LICENSE-APACHE %{buildroot}/usr/share/package-licenses/mesa/6e5c4711bcae04967d7f5b5e01cf56ae03bebe7a || :
cp %{_builddir}/unicode-ident-1.0.12/LICENSE-MIT %{buildroot}/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5 || :
cp %{_builddir}/unicode-ident-1.0.12/LICENSE-UNICODE %{buildroot}/usr/share/package-licenses/mesa/583a5eebcf6119730bd96922e8a0faecf7faf720 || :
pushd ../build32/
DESTDIR=%{buildroot} ninja -C builddir install
if [ -d  %{buildroot}/usr/lib32/pkgconfig ]
then
pushd %{buildroot}/usr/lib32/pkgconfig
for i in *.pc ; do ln -s $i 32$i ; done
popd
fi
if [ -d %{buildroot}/usr/share/pkgconfig ]
then
pushd %{buildroot}/usr/share/pkgconfig
for i in *.pc ; do ln -s $i 32$i ; done
popd
fi
popd
GOAMD64=v3
DESTDIR=%{buildroot}-v3 ninja -C builddiravx2 install
GOAMD64=v2
DESTDIR=%{buildroot} ninja -C builddir install
## Remove excluded files
rm -f %{buildroot}*/usr/include/EGL/egl.h
rm -f %{buildroot}*/usr/include/EGL/eglext.h
rm -f %{buildroot}*/usr/include/GLES/egl.h
rm -f %{buildroot}*/usr/include/GLES/gl.h
rm -f %{buildroot}*/usr/include/GLES/glext.h
rm -f %{buildroot}*/usr/include/GLES/glplatform.h
rm -f %{buildroot}*/usr/include/GLES2/gl2.h
rm -f %{buildroot}*/usr/include/GLES2/gl2ext.h
rm -f %{buildroot}*/usr/include/GLES2/gl2platform.h
rm -f %{buildroot}*/usr/include/GLES3/gl3.h
rm -f %{buildroot}*/usr/include/GLES3/gl31.h
rm -f %{buildroot}*/usr/include/GLES3/gl32.h
rm -f %{buildroot}*/usr/include/GLES3/gl3ext.h
rm -f %{buildroot}*/usr/include/GLES3/gl3platform.h
rm -f %{buildroot}*/usr/include/KHR/khrplatform.h
rm -f %{buildroot}*/usr/include/EGL/eglplatform.h
rm -f %{buildroot}*/usr/include/GL/gl.h
rm -f %{buildroot}*/usr/include/GL/glcorearb.h
rm -f %{buildroot}*/usr/include/GL/glext.h
rm -f %{buildroot}*/usr/include/GL/glx.h
rm -f %{buildroot}*/usr/include/GL/glxext.h
## install_append content
mkdir -p  %{buildroot}/usr/share/OpenCL/
mv %{buildroot}/etc/OpenCL/vendors %{buildroot}/usr/share/OpenCL/vendors
## install_append end
/usr/bin/elf-move.py avx2 %{buildroot}-v3 %{buildroot} %{buildroot}/usr/share/clear/filemap/filemap-%{name}

%files
%defattr(-,root,root,-)

%files bin
%defattr(-,root,root,-)
/V3/usr/bin/aubinator
/V3/usr/bin/aubinator_error_decode
/V3/usr/bin/aubinator_viewer
/V3/usr/bin/brw_asm
/V3/usr/bin/brw_disasm
/V3/usr/bin/elk_asm
/V3/usr/bin/elk_disasm
/V3/usr/bin/intel_dev_info
/V3/usr/bin/intel_error2aub
/V3/usr/bin/intel_error2hangdump
/V3/usr/bin/intel_hang_replay
/V3/usr/bin/intel_hang_viewer
/V3/usr/bin/intel_monitor
/usr/bin/aubinator
/usr/bin/aubinator_error_decode
/usr/bin/aubinator_viewer
/usr/bin/brw_asm
/usr/bin/brw_disasm
/usr/bin/elk_asm
/usr/bin/elk_disasm
/usr/bin/intel_dev_info
/usr/bin/intel_dump_gpu
/usr/bin/intel_error2aub
/usr/bin/intel_error2hangdump
/usr/bin/intel_hang_replay
/usr/bin/intel_hang_viewer
/usr/bin/intel_measure.py
/usr/bin/intel_monitor
/usr/bin/intel_sanitize_gpu
/usr/bin/mesa-overlay-control.py

%files data
%defattr(-,root,root,-)
/usr/share/OpenCL/vendors/rusticl.icd
/usr/share/drirc.d/00-mesa-defaults.conf
/usr/share/drirc.d/00-radv-defaults.conf
/usr/share/glvnd/egl_vendor.d/50_mesa.json
/usr/share/vulkan/explicit_layer.d/VkLayer_INTEL_nullhw.json
/usr/share/vulkan/explicit_layer.d/VkLayer_MESA_overlay.json
/usr/share/vulkan/icd.d/intel_hasvk_icd.i686.json
/usr/share/vulkan/icd.d/intel_hasvk_icd.x86_64.json
/usr/share/vulkan/icd.d/intel_icd.i686.json
/usr/share/vulkan/icd.d/intel_icd.x86_64.json
/usr/share/vulkan/icd.d/lvp_icd.i686.json
/usr/share/vulkan/icd.d/lvp_icd.x86_64.json
/usr/share/vulkan/icd.d/nouveau_icd.i686.json
/usr/share/vulkan/icd.d/nouveau_icd.x86_64.json
/usr/share/vulkan/icd.d/radeon_icd.i686.json
/usr/share/vulkan/icd.d/radeon_icd.x86_64.json
/usr/share/vulkan/icd.d/virtio_icd.i686.json
/usr/share/vulkan/icd.d/virtio_icd.x86_64.json
/usr/share/vulkan/implicit_layer.d/VkLayer_MESA_device_select.json

%files dev
%defattr(-,root,root,-)
/usr/include/EGL/eglext_angle.h
/usr/include/EGL/eglmesaext.h
/usr/include/GL/internal/dri_interface.h
/usr/include/gbm.h
/usr/include/gbm_backend_abi.h
/usr/lib64/pkgconfig/dri.pc
/usr/lib64/pkgconfig/gbm.pc

%files dev32
%defattr(-,root,root,-)
/usr/lib32/pkgconfig/32dri.pc
/usr/lib32/pkgconfig/32egl.pc
/usr/lib32/pkgconfig/32gbm.pc
/usr/lib32/pkgconfig/32gl.pc
/usr/lib32/pkgconfig/32glesv1_cm.pc
/usr/lib32/pkgconfig/32glesv2.pc
/usr/lib32/pkgconfig/dri.pc
/usr/lib32/pkgconfig/egl.pc
/usr/lib32/pkgconfig/gbm.pc
/usr/lib32/pkgconfig/gl.pc
/usr/lib32/pkgconfig/glesv1_cm.pc
/usr/lib32/pkgconfig/glesv2.pc

%files lib
%defattr(-,root,root,-)
/V3/usr/lib64/dri/libdril_dri.so
/V3/usr/lib64/gbm/dri_gbm.so
/V3/usr/lib64/libEGL_mesa.so.0.0.0
/V3/usr/lib64/libGLX_mesa.so.0.0.0
/V3/usr/lib64/libRusticlOpenCL.so.1.0.0
/V3/usr/lib64/libVkLayer_INTEL_nullhw.so
/V3/usr/lib64/libVkLayer_MESA_device_select.so
/V3/usr/lib64/libVkLayer_MESA_overlay.so
/V3/usr/lib64/libgallium-25.2.0-devel.so
/V3/usr/lib64/libgbm.so.1.0.0
/V3/usr/lib64/libvulkan_intel.so
/V3/usr/lib64/libvulkan_intel_hasvk.so
/V3/usr/lib64/libvulkan_lvp.so
/V3/usr/lib64/libvulkan_nouveau.so
/V3/usr/lib64/libvulkan_radeon.so
/V3/usr/lib64/libvulkan_virtio.so
/usr/lib64/dri/crocus_dri.so
/usr/lib64/dri/d3d12_dri.so
/usr/lib64/dri/d3d12_drv_video.so
/usr/lib64/dri/i915_dri.so
/usr/lib64/dri/iris_dri.so
/usr/lib64/dri/libdril_dri.so
/usr/lib64/dri/nouveau_dri.so
/usr/lib64/dri/nouveau_drv_video.so
/usr/lib64/dri/r300_dri.so
/usr/lib64/dri/r600_dri.so
/usr/lib64/dri/r600_drv_video.so
/usr/lib64/dri/radeonsi_dri.so
/usr/lib64/dri/radeonsi_drv_video.so
/usr/lib64/dri/virtio_gpu_dri.so
/usr/lib64/dri/virtio_gpu_drv_video.so
/usr/lib64/dri/vmwgfx_dri.so
/usr/lib64/dri/zink_dri.so
/usr/lib64/gbm/dri_gbm.so
/usr/lib64/libEGL_mesa.so
/usr/lib64/libEGL_mesa.so.0
/usr/lib64/libEGL_mesa.so.0.0.0
/usr/lib64/libGLX_mesa.so
/usr/lib64/libGLX_mesa.so.0
/usr/lib64/libGLX_mesa.so.0.0.0
/usr/lib64/libRusticlOpenCL.so
/usr/lib64/libRusticlOpenCL.so.1
/usr/lib64/libRusticlOpenCL.so.1.0.0
/usr/lib64/libVkLayer_INTEL_nullhw.so
/usr/lib64/libVkLayer_MESA_device_select.so
/usr/lib64/libVkLayer_MESA_overlay.so
/usr/lib64/libgallium-25.2.0-devel.so
/usr/lib64/libgbm.so
/usr/lib64/libgbm.so.1
/usr/lib64/libgbm.so.1.0.0
/usr/lib64/libvulkan_intel.so
/usr/lib64/libvulkan_intel_hasvk.so
/usr/lib64/libvulkan_lvp.so
/usr/lib64/libvulkan_nouveau.so
/usr/lib64/libvulkan_radeon.so
/usr/lib64/libvulkan_virtio.so
/usr/lib64/vdpau/libvdpau_d3d12.so
/usr/lib64/vdpau/libvdpau_d3d12.so.1
/usr/lib64/vdpau/libvdpau_d3d12.so.1.0
/usr/lib64/vdpau/libvdpau_d3d12.so.1.0.0
/usr/lib64/vdpau/libvdpau_nouveau.so
/usr/lib64/vdpau/libvdpau_nouveau.so.1
/usr/lib64/vdpau/libvdpau_nouveau.so.1.0
/usr/lib64/vdpau/libvdpau_nouveau.so.1.0.0
/usr/lib64/vdpau/libvdpau_r600.so
/usr/lib64/vdpau/libvdpau_r600.so.1
/usr/lib64/vdpau/libvdpau_r600.so.1.0
/usr/lib64/vdpau/libvdpau_r600.so.1.0.0
/usr/lib64/vdpau/libvdpau_radeonsi.so
/usr/lib64/vdpau/libvdpau_radeonsi.so.1
/usr/lib64/vdpau/libvdpau_radeonsi.so.1.0
/usr/lib64/vdpau/libvdpau_radeonsi.so.1.0.0
/usr/lib64/vdpau/libvdpau_virtio_gpu.so
/usr/lib64/vdpau/libvdpau_virtio_gpu.so.1
/usr/lib64/vdpau/libvdpau_virtio_gpu.so.1.0
/usr/lib64/vdpau/libvdpau_virtio_gpu.so.1.0.0

%files lib32
%defattr(-,root,root,-)
/usr/lib32/dri/crocus_dri.so
/usr/lib32/dri/i915_dri.so
/usr/lib32/dri/iris_dri.so
/usr/lib32/dri/libdril_dri.so
/usr/lib32/dri/nouveau_dri.so
/usr/lib32/dri/nouveau_drv_video.so
/usr/lib32/dri/r300_dri.so
/usr/lib32/dri/r600_dri.so
/usr/lib32/dri/r600_drv_video.so
/usr/lib32/dri/radeonsi_dri.so
/usr/lib32/dri/radeonsi_drv_video.so
/usr/lib32/dri/virtio_gpu_dri.so
/usr/lib32/dri/virtio_gpu_drv_video.so
/usr/lib32/dri/vmwgfx_dri.so
/usr/lib32/gbm/dri_gbm.so
/usr/lib32/libEGL.so
/usr/lib32/libEGL.so.1
/usr/lib32/libEGL.so.1.0.0
/usr/lib32/libGL.so
/usr/lib32/libGL.so.1
/usr/lib32/libGL.so.1.2.0
/usr/lib32/libGLESv1_CM.so
/usr/lib32/libGLESv1_CM.so.1
/usr/lib32/libGLESv1_CM.so.1.1.0
/usr/lib32/libGLESv2.so
/usr/lib32/libGLESv2.so.2
/usr/lib32/libGLESv2.so.2.0.0
/usr/lib32/libVkLayer_INTEL_nullhw.so
/usr/lib32/libVkLayer_MESA_device_select.so
/usr/lib32/libVkLayer_MESA_overlay.so
/usr/lib32/libgallium-25.2.0-devel.so
/usr/lib32/libgbm.so
/usr/lib32/libgbm.so.1
/usr/lib32/libgbm.so.1.0.0
/usr/lib32/libvulkan_intel.so
/usr/lib32/libvulkan_intel_hasvk.so
/usr/lib32/libvulkan_lvp.so
/usr/lib32/libvulkan_nouveau.so
/usr/lib32/libvulkan_radeon.so
/usr/lib32/libvulkan_virtio.so
/usr/lib32/vdpau/libvdpau_nouveau.so
/usr/lib32/vdpau/libvdpau_nouveau.so.1
/usr/lib32/vdpau/libvdpau_nouveau.so.1.0
/usr/lib32/vdpau/libvdpau_nouveau.so.1.0.0
/usr/lib32/vdpau/libvdpau_r600.so
/usr/lib32/vdpau/libvdpau_r600.so.1
/usr/lib32/vdpau/libvdpau_r600.so.1.0
/usr/lib32/vdpau/libvdpau_r600.so.1.0.0
/usr/lib32/vdpau/libvdpau_radeonsi.so
/usr/lib32/vdpau/libvdpau_radeonsi.so.1
/usr/lib32/vdpau/libvdpau_radeonsi.so.1.0
/usr/lib32/vdpau/libvdpau_radeonsi.so.1.0.0
/usr/lib32/vdpau/libvdpau_virtio_gpu.so
/usr/lib32/vdpau/libvdpau_virtio_gpu.so.1
/usr/lib32/vdpau/libvdpau_virtio_gpu.so.1.0
/usr/lib32/vdpau/libvdpau_virtio_gpu.so.1.0.0

%files libexec
%defattr(-,root,root,-)
/V3/usr/libexec/libintel_dump_gpu.so
/V3/usr/libexec/libintel_sanitize_gpu.so
/usr/libexec/libintel_dump_gpu.so
/usr/libexec/libintel_sanitize_gpu.so

%files license
%defattr(0644,root,root,0755)
/usr/share/package-licenses/mesa/1871c6c7ddab444838aa6a57e6fa085d4e4de683
/usr/share/package-licenses/mesa/2ac7dbfded0b5535a308f7dee23b884658be87e0
/usr/share/package-licenses/mesa/46aace8adc5b06990d9ee2b6bd555ea03c4df7a1
/usr/share/package-licenses/mesa/4c8990add9180fc59efa5b0d8faf643c9709501e
/usr/share/package-licenses/mesa/5798832c31663cedc1618d18544d445da0295229
/usr/share/package-licenses/mesa/583a5eebcf6119730bd96922e8a0faecf7faf720
/usr/share/package-licenses/mesa/6e5c4711bcae04967d7f5b5e01cf56ae03bebe7a
/usr/share/package-licenses/mesa/7e5936a6fa3cf3518c01cec41345adf27399fe12
/usr/share/package-licenses/mesa/98d051673de64cfd533ded6d75f1526f5f4f27af
/usr/share/package-licenses/mesa/a74c5e048f9ed570eb892f81ca5daf05936475b0
/usr/share/package-licenses/mesa/c371f0a7cbb203643d88566665a452f96bf1ab86
/usr/share/package-licenses/mesa/c9c1c33aee599ebfdfb0bc2aed9ea082d9e3173a
/usr/share/package-licenses/mesa/c9e89168faf085da40190d78ade18b3a5d826c76
/usr/share/package-licenses/mesa/ce3a2603094e799f42ce99c40941544dfcc5c4a5
/usr/share/package-licenses/mesa/ed19a80b922d4e5e50d5b1ed3f0f35c081872d14
/usr/share/package-licenses/mesa/ef39856b9b4ca101d453780fa97b117064273142
